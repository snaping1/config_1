
# Shell Emulator
![Интерфейс](https://i.imgur.com/ON2UM1G.png)
## Описание

Этот проект реализует эмулятор оболочки, который поддерживает основные команды, такие как изменение директорий, отображение файлов, изменение прав владения файлами и другие, используя виртуальную файловую систему, извлечённую из архива tar.

## Версия Python

Для работы с проектом требуется Python 3.10 или новее. Рекомендуется создать виртуальное окружение:

```bash
python -m venv venv
source venv/bin/activate  # для Linux/Mac
venv\Scripts\activate  # для Windows
```

## Необходимые библиотеки

Убедитесь, что у вас установлены следующие библиотеки, необходимые для тестирования:

- `exceptiongroup==1.2.2`
- `iniconfig==2.0.0`
- `packaging==24.1`
- `pluggy==1.5.0`
- `pytest==8.3.3`
- `tomli==2.0.2`

Вы можете установить библиотеки с помощью pip после активации виртуального окружения:

```bash
pip install -r requirements.txt
```

## Настройка

Чтобы настроить вашу виртуальную файловую систему (VFS), вы можете либо создать свой собственный архив tar, либо использовать предоставленный скрипт. Вот два варианта:

### Вариант 1: Создание архива tar с помощью скрипта

Запустите следующую команду, чтобы создать файл `vfs.tar`:

```bash
python create_tar.py
```

### Вариант 2: Ручное создание архива tar

Если вы предпочитаете создать свой собственный архив tar, выполните следующие команды:

```bash
mkdir -p vfs/home/user
touch vfs/home/user/file1.txt vfs/home/user/file2.txt
tar -cvf vfs.tar vfs
```

Это создаст структуру директорий с двумя файлами (`file1.txt` и `file2.txt`) и упакует её в `vfs.tar`.

## Запуск эмулятора

Рекомендуется сначала запустить эмулятор оболочки напрямую из командной строки, а затем с использованием стартового скрипта.

### Вариант 1: Запуск без скрипта

Вы можете запустить эмулятор оболочки напрямую из командной строки:

```bash
python main.py --username user1 --fs vfs.tar --log session_log.csv
```

### Вариант 2: Использование стартового скрипта

Вот пример того, как может выглядеть ваш скрипт `start.sh`:

```bash
ls
cd test_dir/home/user
ls
```

Запускайте эмулятор с использованием скрипта:

```bash
python main.py --username user1 --fs vfs.tar --log session_log.csv --config start.sh
```

## Параметры командной строки

- `--username`: Имя пользователя, используемое для сессии. Это может быть полезно для отслеживания действий пользователя в журнале.
- `--fs`: Путь к файлу виртуальной файловой системы (VFS) в формате tar, который вы хотите использовать.
- `--log`: Путь к файлу, в который будут записаны логи сессии, включая команды и результаты их выполнения.
- `--config`: Путь к стартовому скрипту.
## Использование

После запуска эмулятора оболочки вы можете использовать такие команды, как:

- `ls` - Отобразить файлы в текущей директории.
- `cd <директория>` - Перейти в указанную директорию.
- `chown <новый_владелец> <файл>` - Изменить владельца указанного файла.
- `cal` - Просмотр календаря.
- `history` - Просмотр введённых команд.
- `exit` - Выйти из эмулятора оболочки.

## Тесты

Для тестирования функций используется фреймворк pytest
Тестируются:
- cd_command_failure
- cd_command_success
- chown_command_failure
- chown_command_success
- history_command
- ls_command
![Тесты](https://i.imgur.com/3HnI26y.png)